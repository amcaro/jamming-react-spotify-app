(this.webpackJsonpjamming=this.webpackJsonpjamming||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(8),s=n.n(r),i=(n(15),n(10)),o=n(9),u=n(4),l=(n(16),n(17),n(0));var h=function(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),a=n[0],r=n[1];return Object(l.jsxs)("div",{className:"SearchBar",children:[Object(l.jsx)("input",{placeholder:"Search a track",onChange:function(e){r(e.target.value)},value:a}),Object(l.jsx)("button",{className:"SearchButton",onClick:function(){!function(t){e.onSearch(t)}(a)},children:"SEARCH"})]})};n(19),n(20),n(21);var f=function(e){var t=function(){e.onAdd(e.track)},n=function(){e.onRemove(e.track)},c=e.track.artists.map((function(e){return"".concat(e.name,", ")})),a=c.length-1;return c[a]=c[a].replace(", ",""),Object(l.jsxs)("div",{className:"Track",children:[Object(l.jsxs)("div",{className:"Track-information",children:[Object(l.jsx)("h3",{children:e.track.name}),Object(l.jsxs)("p",{children:[c," | ",e.track.album.name," "]})]}),function(){var c=Object(l.jsx)("button",{className:"Track-action",onClick:t,children:"+"});return e.isRemoval&&(c=Object(l.jsx)("button",{className:"Track-action",onClick:n,children:"-"})),c}()]})},j=function(e){if(!e.tracks)return Object(l.jsx)("p",{children:"No results"});var t=e.tracks.map((function(t){return Object(l.jsx)("li",{children:Object(l.jsx)(f,{track:t,isRemoval:e.isRemoval,onAdd:e.onAdd,onRemove:e.onRemove})},t.id)}));return Object(l.jsx)("div",{className:"TrackList",children:Object(l.jsx)("ul",{children:t})})};var d=function(e){return Object(l.jsxs)("div",{className:"SearchResults",children:[Object(l.jsx)("h2",{children:"Results"}),Object(l.jsx)(j,{tracks:e.searchResults,onAdd:e.onAdd,isRemoval:!1})]})};n(22);var p,m,b=function(e){return Object(l.jsxs)("div",{className:"Playlist",children:[Object(l.jsx)("input",{type:"text",name:"playlist",value:e.name,onChange:function(t){e.setName(t.target.value)}}),Object(l.jsx)(j,{tracks:e.tracks,onRemove:e.onRemove,isRemoval:!0}),Object(l.jsx)("button",{className:"Playlist-save",onClick:function(){e.onSave(),e.setName("New Playlist")},children:"SAVE TO SPOTIFY"})]})},v=n(2),x=n.n(v),O=n(6),k={getAccessToken:function(){return Object(O.a)(x.a.mark((function e(){var t,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return",m);case 2:if(t=window.location.href,n=t.match(/expires_in=([^&]*)/),!(c=t.match(/access_token=([^&]*)/))||!n){e.next=11;break}return m=c[0].replace("access_token=",""),p=n[0].replace("expires_in=",""),window.setTimeout((function(){return m=null}),1e3*p),window.history.pushState("Access Token",null,"/jamming-react-spotify-app/"),e.abrupt("return",m);case 11:window.location.href="".concat("https://accounts.spotify.com/authorize?","&client_id=").concat("221c24a4cc8f4d59b13a38940b77ce4e","&scope=playlist-modify-public&redirect_uri=").concat("https://amcaro.github.io/jamming-react-spotify-app/","&response_type=token");case 12:case"end":return e.stop()}}),e)})))()},search:function(e){return Object(O.a)(x.a.mark((function t(){var n,c,a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e),c="https://api.spotify.com/v1/search?q=".concat(n,"&type=track"),a=[],t.next=5,fetch(c,{headers:{Authorization:"Bearer "+m}});case 5:return r=t.sent,t.next=8,r.json();case 8:return t.sent.tracks.items.forEach((function(e){var t={id:e.id,name:e.name,artists:[],album:{name:e.album.name},uri:e.uri};e.artists.forEach((function(e){t.artists.push({name:e.name})})),a.push(t)})),t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))()},savePlaylist:function(e,t){return Object(O.a)(x.a.mark((function n(){var c,a,r,s,i,o,u,l;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t.length){n.next=2;break}return n.abrupt("return");case 2:return"https://api.spotify.com/v1/me",c={Authorization:"Bearer "+m},n.next=6,fetch("https://api.spotify.com/v1/me",{headers:c});case 6:if(!(r=n.sent).ok){n.next=14;break}return n.next=10,r.json();case 10:s=n.sent,a=s.id,n.next=16;break;case 14:return console.log("Error fetching userID"),n.abrupt("return");case 16:return i="https://api.spotify.com/v1/users/".concat(a,"/playlists"),n.next=19,fetch(i,{method:"POST",headers:c,body:JSON.stringify({name:e}),json:!0});case 19:if(!(r=n.sent).ok){n.next=27;break}return n.next=23,r.json();case 23:u=n.sent,o=u.id,n.next=29;break;case 27:return console.log("Error posting Playlist"),n.abrupt("return");case 29:return l="https://api.spotify.com/v1/playlists/".concat(o,"/tracks"),n.next=32,fetch(l,{method:"POST",headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"},body:JSON.stringify({uris:t})});case 32:(r=n.sent).ok?(r.json(),new Notification("'".concat(e,"' has been saved to Spotify!")),console.log("Songs added to playlist")):console.log("Error adding songs to playlist");case 34:case"end":return n.stop()}}),n)})))()}};var y=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)("New Playlist"),f=Object(u.a)(s,2),j=f[0],p=f[1],m=Object(c.useState)([]),v=Object(u.a)(m,2),x=v[0],O=v[1];return Object(c.useEffect)((function(){k.getAccessToken().then(Notification.requestPermission())}),[]),Object(l.jsxs)("div",{children:[Object(l.jsxs)("h1",{children:["Ja",Object(l.jsx)("span",{className:"highlight",children:"mmm"}),"ing"]}),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(h,{onSearch:function(e){k.search(e).then((function(e){r(e)})).catch((function(e){console.log(e)}))}}),Object(l.jsxs)("div",{className:"App-playlist",children:[Object(l.jsx)(d,{searchResults:a,onAdd:function(e){var t,n=!1,c=Object(o.a)(x);try{for(c.s();!(t=c.n()).done;){if(t.value.id===e.id){n=!0;break}}}catch(a){c.e(a)}finally{c.f()}n||O([].concat(Object(i.a)(x),[e]))}}),Object(l.jsx)(b,{name:j,tracks:x,onRemove:function(e){O(x.filter((function(t){return t.id!==e.id})))},setName:p,onSave:function(){var e=x.map((function(e){return e.uri}));k.savePlaylist(j,e),O([])}})]})]})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root")),g()}],[[24,1,2]]]);
//# sourceMappingURL=main.c35f8f1d.chunk.js.map